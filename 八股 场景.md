## 1. 抽奖系统设计

- 负载均衡层的限流
  **防止用户重复抽奖**；
  **开奖后暴力拦截流量**，抽奖服务一旦全部开奖完毕，直接更新一个共享状态。然后负载均衡感知到了之后，后续请求全部拦截掉返回一个抽奖结束的标识就可以了。

- 在抽奖服务和礼品服务之间，引入消息中间件，进行**限流削峰**。

  ![img](./assets/1be3a0b881ab375c14c993022936f8af.png)